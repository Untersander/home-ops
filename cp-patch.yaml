machine:
    network:
        hostname: rock-cp-1
    install:
        # Allows for supplying the image used to perform the installation.
        # https://factory.talos.dev/ used to generate the image.
        # customization:
        #     systemExtensions:
        #         officialExtensions:
        #             - siderolabs/btrfs
        #             - siderolabs/nvidia-container-toolkit
        #             - siderolabs/nonfree-kmod-nvidia
        # image: factory.talos.dev/installer/dc1f3867d3cf4ed2c5a662be3e054250324820b748b8573e720f7a196604ddbd:v1.6.0
        # Only btrfs
        image: factory.talos.dev/installer/ee645b8460c0cfba143e861fe6d9a2cfe868a26e384618381fbd499724de2f4e:v1.6.0
        wipe: true
        diskSelector:
            # size: 256GB # Disk size.
            model: Samsung SSD* # Disk model `/sys/block/<dev>/device/model`.
            type: SSD # Disk type (SSD, HDD).
    sysctls:
        vm.nr_hugepages: "1024"
        net.core.bpf_jit_harden: 1
    # Kernel modules to load.
    kernel:
        modules:
            - name: btrfs
            # - name: nvidia
            # - name: nvidia_uvm
            # - name: nvidia_drm pace.
            # - name: nvidia_modeset
cluster:
    controlPlane:
        endpoint: https://10.0.0.4:6443 # Endpoint is the canonical controlplane endpoint, which can be an IP address or a DNS hostname.
    clusterName: HomeLab # Configures the cluster's name.
    network:
    # Disable for cilium
        cni:
            name: none # Name of CNI to use.
    proxy:
        # Disable kube-proxy deployment on cluster bootstrap.
        disabled: true